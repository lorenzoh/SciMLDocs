{"attributes":{"module":"DiffEqSensitivity","backlinks":[],"path":"/Users/lorenz/.julia/packages/DiffEqSensitivity/GjhZ8/src/sensitivity_interface.jl","title":"DiffEqSensitivity/src/sensitivity_interface.jl"},"tag":"sourcefile","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"md","children":[{"attributes":{},"tag":"h1","children":["Direct calls"],"type":"node"}],"type":"node"},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"CONST","children":[{"attributes":{},"tag":"CONST","children":["const"],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ADJOINT_PARAMETER_COMPATABILITY_MESSAGE"},"tag":"reference","children":["ADJOINT_PARAMETER_COMPATABILITY_MESSAGE"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":[" \r\n"],"type":"node"},{"attributes":{},"tag":"STRING_INTERP","children":[{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Adjoint sensitivity analysis functionality requires being able to solve\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["a differential equation defined by the parameter struct `p`. Thus while\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["DifferentialEquations.jl can support any parameter struct type, usage\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["with adjoint sensitivity analysis requires that `p` could be a valid\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["type for being the initial condition `u0` of an array. This means that\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["many simple types, such as `Tuple`s and `NamedTuple`s, will work as\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["parameters in normal contexts but will fail during adjoint differentiation.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["To work around this issue for complicated cases like nested structs, look\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["into defining `p` using `AbstractArray` libraries such as RecursiveArrayTools.jl \r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["or ComponentArrays.jl so that `p` is an `AbstractArray` with a concrete element type.\r\n"],"type":"node"},{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"STRUCT","children":[{"attributes":{},"tag":"FALSE","children":[""],"type":"node"},{"attributes":{},"tag":"STRUCT","children":["struct"],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.AdjointSensitivityParameterCompatibilityError"},"tag":"reference","children":["AdjointSensitivityParameterCompatibilityError"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":["<:"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["Exception"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["Base"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["showerror"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":[{"attributes":{},"tag":"IDENTIFIER","children":["io"],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":["::"],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["IO"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":[{"attributes":{},"tag":"IDENTIFIER","children":["e"],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":["::"],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.AdjointSensitivityParameterCompatibilityError"},"tag":"reference","children":["AdjointSensitivityParameterCompatibilityError"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["print"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["io"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ADJOINT_PARAMETER_COMPATABILITY_MESSAGE"},"tag":"reference","children":["ADJOINT_PARAMETER_COMPATABILITY_MESSAGE"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"AT_SIGN","children":["@"],"type":"node"},{"attributes":{},"tag":"MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"STRING_MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"STRING_INTERP","children":[{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["adjoint_sensitivities(sol,alg,g,t=nothing,dg=nothing;\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            abstol=1e-6,reltol=1e-3,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            checkpoints=sol.t,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            corfunc_analytical=nothing,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            callback = nothing,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            sensealg=InterpolatingAdjoint(),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Adjoint sensitivity analysis is used to find the gradient of the solution\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["with respect to some functional of the solution. In many cases this is used\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["in an optimization problem to return the gradient with respect to some cost\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function. It is equivalent to \"backpropagation\" or reverse-mode automatic\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["differentiation of a differential equation.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Using `adjoint_sensitivities` directly let's you do three things. One it can\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["allow you to be more efficient, since the sensitivity calculation can be done\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["directly on a cost function, avoiding the overhead of building the derivative\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["of the full concretized solution. It can also allow you to be more efficient\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["by directly controlling the forward solve that is then reversed over. Lastly,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["it allows one to define a continuous cost function on the continuous solution,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["instead of just at discrete data points.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["!!! warning\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      Adjoint sensitivity analysis functionality requires being able to solve\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      a differential equation defined by the parameter struct `p`. Thus while\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      DifferentialEquations.jl can support any parameter struct type, usage\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      with adjoint sensitivity analysis requires that `p` could be a valid\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      type for being the initial condition `u0` of an array. This means that\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      many simple types, such as `Tuple`s and `NamedTuple`s, will work as\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      parameters in normal contexts but will fail during adjoint differentiation.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      To work around this issue for complicated cases like nested structs, look\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      into defining `p` using `AbstractArray` libraries such as RecursiveArrayTools.jl \r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      or ComponentArrays.jl so that `p` is an `AbstractArray` with a concrete element type.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["!!! warning\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      Non-checkpointed InterpolatingAdjoint and QuadratureAdjoint sensealgs\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      require that the forward solution `sol(t)` has an accurate dense\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      solution unless checkpointing is used. This means that you should\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      not use `solve(prob,alg,saveat=ts)` unless checkpointing. If specific\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      saving is required, one should solve dense `solve(prob,alg)`, use the\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      solution in the adjoint, and then `sol(ts)` interpolate.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Syntax\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["There are two forms. For discrete adjoints, the form is:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["du0,dp = adjoint_sensitivities(sol,alg,dg,ts;sensealg=InterpolatingAdjoint(),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               checkpoints=sol.t,kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["where `alg` is the ODE algorithm to solve the adjoint problem, `dg` is the jump\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function, `sensealg` is the sensitivity algorithm, and `ts` is the time points\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["for data. `dg` is given by:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dg(out,u,p,t,i)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["which is the in-place gradient of the cost functional `g` at time point `ts[i]`\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["with `u=u(t)`.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["For continuous functionals, the form is:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["du0,dp = adjoint_sensitivities(sol,alg,g,nothing,(dgdu,dgdp);sensealg=InterpolatingAdjoint(),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               checkpoints=sol.t,,kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["for the cost functional\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["g(u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["with in-place gradient\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dgdu(out,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dgdp(out,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["If the gradient is omitted, i.e.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["du0,dp = adjoint_sensitivities(sol,alg,g,nothing;kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["then we assume `dgdp` is zero and `dgdu` will be computed automatically using ForwardDiff or finite\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["differencing, depending on the `autodiff` setting in the `AbstractSensitivityAlgorithm`.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Note that the keyword arguments are passed to the internal ODE solver for\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["solving the adjoint problem.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Example discrete adjoints on a cost function\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["In this example we will show solving for the adjoint sensitivities of a discrete\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["cost functional. First let's solve the ODE and get a high quality continuous\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["solution:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function f(du,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[1] = dx = p[1]*u[1] - p[2]*u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[2] = dy = -p[3]*u[2] + u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["p = [1.5,1.0,3.0]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["prob = ODEProblem(f,[1.0;1.0],(0.0,10.0),p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["sol = solve(prob,Vern9(),abstol=1e-10,reltol=1e-10)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Now let's calculate the sensitivity of the ``\\ell_2`` error against 1 at evenly spaced\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["points in time, that is:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```math\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["L(u,p,t)=\\sum_{i=1}^{n}\\frac{\\Vert1-u(t_{i},p)\\Vert^{2}}{2}\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["for ``t_i = 0.5i``. This is the assumption that the data is `data[i]=1.0`.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["For this function, notice we have that:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```math\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\\begin{aligned}\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dg_{1}&=1-u_{1} \\\\\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dg_{2}&=1-u_{2} \\\\\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["& \\quad \\vdots\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\\end{aligned}\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["and thus:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["dg(out,u,p,t,i) = (out.=1.0.-u)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Also, we can omit `dgdp`, because the cost function doesn't dependent on `p`. If we had data, we'd just replace `1.0` with `data[i]`. To get the adjoint\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["sensitivities, call:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["ts = 0:0.5:10\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res = adjoint_sensitivities(sol,Vern9(),dg,ts,abstol=1e-14,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            reltol=1e-14)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["This is super high accuracy. As always, there's a tradeoff between accuracy\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["and computation time. We can check this almost exactly matches the\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["autodifferentiation and numerical differentiation results:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using ForwardDiff,Calculus,Tracker\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function G(p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  tmp_prob = remake(prob,u0=convert.(eltype(p),prob.u0),p=p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  sol = solve(tmp_prob,Vern9(),abstol=1e-14,reltol=1e-14,saveat=ts,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["              sensealg=SensitivityADPassThrough())\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  A = convert(Array,sol)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  sum(((1 .- A).^2)./2)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["G([1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res2 = ForwardDiff.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res3 = Calculus.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res4 = Tracker.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res5 = ReverseDiff.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["and see this gives the same values.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Example controlling adjoint method choices and checkpointing\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["In the previous examples, all calculations were done using the interpolating\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["method. This maximizes speed but at a cost of requiring a dense `sol`. If it\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["is not possible to hold a dense forward solution in memory, then one can use\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["checkpointing. For example:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["ts = [0.0,0.2,0.5,0.7]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["sol = solve(prob,Vern9(),saveat=ts)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Creates a non-dense solution with checkpoints at `[0.0,0.2,0.5,0.7]`. Now we\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["can do:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res = adjoint_sensitivities(sol,Vern9(),dg,ts,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            sensealg=InterpolatingAdjoint(checkpointing=true))\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["When grabbing a Jacobian value during the backwards solution, it will no longer\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["interpolate to get the value. Instead, it will start a forward solution at the\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["nearest checkpoint to build local interpolants in a way that conserves memory.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["By default the checkpoints are at `sol.t`, but we can override this:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res = adjoint_sensitivities(sol,Vern9(),dg,ts,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            sensealg=InterpolatingAdjoint(checkpointing=true),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                            checkpoints = [0.0,0.5])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Example continuous adjoints on an energy functional\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["In this case we'd like to calculate the adjoint sensitivity of the scalar energy\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["functional:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```math\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["G(u,p)=\\int_{0}^{T}\\frac{\\sum_{i=1}^{n}u_{i}^{2}(t)}{2}dt\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["which is:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["g(u,p,t) = (sum(u).^2) ./ 2\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Notice that the gradient of this function with respect to the state `u` is:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function dg(out,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  out[1]= u[1] + u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  out[2]= u[1] + u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["To get the adjoint sensitivities, we call:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res = adjoint_sensitivities(sol,Vern9(),g,nothing,dg,abstol=1e-8,\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                                 reltol=1e-8,iabstol=1e-8,ireltol=1e-8)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Notice that we can check this against autodifferentiation and numerical\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["differentiation as follows:\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using QuadGK\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function G(p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  tmp_prob = remake(prob,p=p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  sol = solve(tmp_prob,Vern9(),abstol=1e-14,reltol=1e-14)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  res,err = quadgk((t)-> (sum(sol(t)).^2)./2,0.0,10.0,atol=1e-14,rtol=1e-10)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  res\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res2 = ForwardDiff.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["res3 = Calculus.gradient(G,[1.5,1.0,3.0])\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.adjoint_sensitivities"},"tag":"reference","children":["adjoint_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                  "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.InterpolatingAdjoint"},"tag":"reference","children":["InterpolatingAdjoint"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                  "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._adjoint_sensitivities"},"tag":"reference","children":["_adjoint_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._adjoint_sensitivities"},"tag":"reference","children":["_adjoint_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-6"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-3"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["corfunc_analytical"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"IF","children":[{"attributes":{},"tag":"IF","children":["if"],"type":"node"},{"attributes":{},"tag":"LAZY_OR","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"NOT","children":["!"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["typeof"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":["<:"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CURLY","children":[{"attributes":{},"tag":"IDENTIFIER","children":["Union"],"type":"node"},{"attributes":{},"tag":"LBRACE","children":["{"],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["Nothing"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase"},"tag":"reference","children":["SciMLBase"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.NullParameters"},"tag":"reference","children":["NullParameters"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["AbstractArray"],"type":"node"},{"attributes":{},"tag":"RBRACE","children":["}"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"LAZY_OR","children":["||"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"LAZY_AND","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISA","children":["isa"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["AbstractArray"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"LAZY_AND","children":["&&"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"NOT","children":["!"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["Base"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["isconcretetype"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["eltype"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["throw"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.AdjointSensitivityParameterCompatibilityError"},"tag":"reference","children":["AdjointSensitivityParameterCompatibilityError"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"IF","children":[{"attributes":{},"tag":"IF","children":["if"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISA","children":["isa"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.ODEProblem"},"tag":"reference","children":["ODEProblem"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_prob"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ODEAdjointProblem"},"tag":"reference","children":["ODEAdjointProblem"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                 "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                 "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"ELSEIF","children":[{"attributes":{},"tag":"ELSEIF","children":["elseif"],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISA","children":["isa"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.SDEProblem"},"tag":"reference","children":["SDEProblem"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_prob"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.SDEAdjointProblem"},"tag":"reference","children":["SDEAdjointProblem"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                 "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                 "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                 "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["corfunc_analytical"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["corfunc_analytical"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"ELSEIF","children":[{"attributes":{},"tag":"ELSEIF","children":["elseif"],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISA","children":["isa"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.RODEProblem"},"tag":"reference","children":["RODEProblem"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_prob"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.RODEAdjointProblem"},"tag":"reference","children":["RODEAdjointProblem"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["callback"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["corfunc_analytical"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["corfunc_analytical"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"ELSE","children":["else"],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["error"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["Continuous adjoint sensitivities are only supported for ODE/SDE/RODE problems."],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["tstops"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IF","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ischeckpointing"},"tag":"reference","children":["ischeckpointing"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CONDITIONAL","children":["?"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["checkpoints"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"COLON","children":[":"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["similar"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["t"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["0"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_sol"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/CommonSolve.solve"},"tag":"reference","children":["solve"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["adj_prob"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                  "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["save_everystep"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FALSE","children":["false"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["save_start"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FALSE","children":["false"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["saveat"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["eltype"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["1"],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                  "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["tstops"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["tstops"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["l"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IF","children":[{"attributes":{},"tag":"LAZY_OR","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQEQEQ","children":["==="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"LAZY_OR","children":["||"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQEQEQ","children":["==="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["DiffEqBase"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.NullParameters"},"tag":"reference","children":["NullParameters"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CONDITIONAL","children":["?"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["0"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"COLON","children":[":"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["length"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["du0"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"MINUS","children":["-"],"type":"node"},{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_sol"],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["end"],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"INTEGER","children":["1"],"type":"node"},{"attributes":{},"tag":"COLON","children":[":"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["length"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["u0"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"IF","children":[{"attributes":{},"tag":"IF","children":["if"],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["eltype"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"ISSUBTYPE","children":["<:"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["real"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["eltype"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_sol"],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["end"],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dp"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"PRIME","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["real"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"TUPLE","children":[{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_sol"],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["end"],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"INTEGER","children":["1"],"type":"node"},{"attributes":{},"tag":"COLON","children":[":"],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["l"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"PLUS","children":[".+"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["length"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["u0"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PRIME","children":["'"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"ELSEIF","children":[{"attributes":{},"tag":"ELSEIF","children":["elseif"],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"LAZY_OR","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQEQEQ","children":["==="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"LAZY_OR","children":["||"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["p"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQEQEQ","children":["==="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["DiffEqBase"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{"reftype":"symbol","document_id":"references/SciMLBase.NullParameters"},"tag":"reference","children":["NullParameters"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dp"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"},{"attributes":{},"tag":"ELSE","children":["else"],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n    "],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dp"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"PRIME","children":[{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"REF","children":[{"attributes":{},"tag":"IDENTIFIER","children":["adj_sol"],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["end"],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"INTEGER","children":["1"],"type":"node"},{"attributes":{},"tag":"COLON","children":[":"],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["l"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"PLUS","children":[".+"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["length"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["u0"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PRIME","children":["'"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n  "],"type":"node"},{"attributes":{},"tag":"TUPLE","children":[{"attributes":{},"tag":"IDENTIFIER","children":["du0"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dp"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._adjoint_sensitivities"},"tag":"reference","children":["_adjoint_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":["::"],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.SteadyStateAdjoint"},"tag":"reference","children":["SteadyStateAdjoint"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-6"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-3"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.SteadyStateAdjointProblem"},"tag":"reference","children":["SteadyStateAdjointProblem"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._adjoint_sensitivities"},"tag":"reference","children":["_adjoint_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"DECLARATION","children":["::"],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.SteadyStateAdjoint"},"tag":"reference","children":["SteadyStateAdjoint"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["nothing"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["abstol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-6"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["reltol"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"FLOAT","children":["1e-3"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                   "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.SteadyStateAdjointProblem"},"tag":"reference","children":["SteadyStateAdjointProblem"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sol"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["g"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["dg"],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"AT_SIGN","children":["@"],"type":"node"},{"attributes":{},"tag":"MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"STRING_MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"STRING_INTERP","children":[{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["H = second_order_sensitivities(loss,prob,alg,args...;\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               sensealg=ForwardDiffOverAdjoint(InterpolatingAdjoint(autojacvec=ReverseDiffVJP())),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Second order sensitivity analysis is used for the fast calculation of Hessian\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["matrices.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["!!! warning\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      Adjoint sensitivity analysis functionality requires being able to solve\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      a differential equation defined by the parameter struct `p`. Thus while\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      DifferentialEquations.jl can support any parameter struct type, usage\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      with adjoint sensitivity analysis requires that `p` could be a valid\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      type for being the initial condition `u0` of an array. This means that\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      many simple types, such as `Tuple`s and `NamedTuple`s, will work as\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      parameters in normal contexts but will fail during adjoint differentiation.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      To work around this issue for complicated cases like nested structs, look\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      into defining `p` using `AbstractArray` libraries such as RecursiveArrayTools.jl \r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      or ComponentArrays.jl so that `p` is an `AbstractArray` with a concrete element type.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Example second order sensitivity analysis calculation\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using DiffEqSensitivity, OrdinaryDiffEq, ForwardDiff\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using Test\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function lotka!(du,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[1] = dx = p[1]*u[1] - p[2]*u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[2] = dy = -p[3]*u[2] + p[4]*u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["p = [1.5,1.0,3.0,1.0]; u0 = [1.0;1.0]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["prob = ODEProblem(lotka!,u0,(0.0,10.0),p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["loss(sol) = sum(sol)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["v = ones(4)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["H  = second_order_sensitivities(loss,prob,Vern9(),saveat=0.1,abstol=1e-12,reltol=1e-12)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["## Arguments\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["The arguments for this function match `adjoint_sensitivities`. The only notable difference\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["is `sensealg` which requires a second order sensitivity algorithm, of which currently the\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["only choice is `ForwardDiffOverAdjoint` which uses forward-over-reverse to mix a forward-mode\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["sensitivity analysis with an adjoint sensitivity analysis for a faster computation than either\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["double forward or double reverse. `ForwardDiffOverAdjoint`'s positional argument just accepts\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["a first order sensitivity algorithm.\r\n"],"type":"node"},{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.second_order_sensitivities"},"tag":"reference","children":["second_order_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["loss"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                    "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ForwardDiffOverAdjoint"},"tag":"reference","children":["ForwardDiffOverAdjoint"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.InterpolatingAdjoint"},"tag":"reference","children":["InterpolatingAdjoint"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["autojacvec"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ReverseDiffVJP"},"tag":"reference","children":["ReverseDiffVJP"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                    "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._second_order_sensitivities"},"tag":"reference","children":["_second_order_sensitivities"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["loss"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n\r"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"AT_SIGN","children":["@"],"type":"node"},{"attributes":{},"tag":"MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"STRING_MACRO_NAME","children":["doc"],"type":"node"},{"attributes":{},"tag":"STRING_INTERP","children":[{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Hv = second_order_sensitivity_product(loss,v,prob,alg,args...;\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               sensealg=ForwardDiffOverAdjoint(InterpolatingAdjoint(autojacvec=ReverseDiffVJP())),\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["                               kwargs...)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Second order sensitivity analysis product is used for the fast calculation of \r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Hessian-vector products ``Hv`` without requiring the construction of the Hessian\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["matrix.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["!!! warning\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      Adjoint sensitivity analysis functionality requires being able to solve\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      a differential equation defined by the parameter struct `p`. Thus while\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      DifferentialEquations.jl can support any parameter struct type, usage\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      with adjoint sensitivity analysis requires that `p` could be a valid\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      type for being the initial condition `u0` of an array. This means that\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      many simple types, such as `Tuple`s and `NamedTuple`s, will work as\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      parameters in normal contexts but will fail during adjoint differentiation.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      To work around this issue for complicated cases like nested structs, look\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      into defining `p` using `AbstractArray` libraries such as RecursiveArrayTools.jl \r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["      or ComponentArrays.jl so that `p` is an `AbstractArray` with a concrete element type.\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["### Example second order sensitivity analysis calculation\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```julia\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using DiffEqSensitivity, OrdinaryDiffEq, ForwardDiff\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["using Test\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["function lotka!(du,u,p,t)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[1] = dx = p[1]*u[1] - p[2]*u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["  du[2] = dy = -p[3]*u[2] + p[4]*u[1]*u[2]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["end\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["p = [1.5,1.0,3.0,1.0]; u0 = [1.0;1.0]\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["prob = ODEProblem(lotka!,u0,(0.0,10.0),p)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["loss(sol) = sum(sol)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["v = ones(4)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["Hv = second_order_sensitivity_product(loss,v,prob,Vern9(),saveat=0.1,abstol=1e-12,reltol=1e-12)\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["```\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["## Arguments\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["The arguments for this function match `adjoint_sensitivities`. The only notable difference\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["is `sensealg` which requires a second order sensitivity algorithm, of which currently the\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["only choice is `ForwardDiffOverAdjoint` which uses forward-over-reverse to mix a forward-mode\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["sensitivity analysis with an adjoint sensitivity analysis for a faster computation than either\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["double forward or double reverse. `ForwardDiffOverAdjoint`'s positional argument just accepts\r\n"],"type":"node"},{"attributes":{},"tag":"STRING","children":["a first order sensitivity algorithm.\r\n"],"type":"node"},{"attributes":{},"tag":"TRIPLE_DQUOTE","children":["\"\"\""],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"},{"attributes":{},"tag":"FUNCTION","children":[{"attributes":{},"tag":"FUNCTION","children":["function"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.second_order_sensitivity_product"},"tag":"reference","children":["second_order_sensitivity_product"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["loss"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["v"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                          "],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ForwardDiffOverAdjoint"},"tag":"reference","children":["ForwardDiffOverAdjoint"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.InterpolatingAdjoint"},"tag":"reference","children":["InterpolatingAdjoint"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"KW","children":[{"attributes":{},"tag":"IDENTIFIER","children":["autojacvec"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity.ReverseDiffVJP"},"tag":"reference","children":["ReverseDiffVJP"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n                                          "],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"BLOCK","children":[{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n  "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DiffEqSensitivity._second_order_sensitivity_product"},"tag":"reference","children":["_second_order_sensitivity_product"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["loss"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["v"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["prob"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["alg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["sensealg"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["args"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"PARAMETERS","children":[{"attributes":{},"tag":"SEMICOLON","children":[";"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":[{"attributes":{},"tag":"IDENTIFIER","children":["kwargs"],"type":"node"},{"attributes":{},"tag":"DDDOT","children":["..."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\r\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"END","children":["end"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}