{"attributes":{"backlinks":[],"path":"/Users/lorenz/.julia/packages/ModelingToolkit/fp90z/docs/src/basics/Variable_metadata.md","title":"Symbolic metadata"},"tag":"document","children":[{"attributes":{},"tag":"md","children":[{"attributes":{},"tag":"h1","children":["Symbolic metadata"],"type":"node"},{"attributes":{},"tag":"p","children":["It is possible to add metadata to symbolic variables. The following information can be added (note, it's possible to extend this to user-defined metadata as well)"],"type":"node"},{"attributes":{},"tag":"h2","children":["Input or output"],"type":"node"},{"attributes":{},"tag":"p","children":["Designate a variable as either an input or an output using the following"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["using ModelingToolkit\n@variables u [input=true]\nisinput(u)\n"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["@variables y [output=true]\nisoutput(y)\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Bounds"],"type":"node"},{"attributes":{},"tag":"p","children":["Bounds are useful when parameters are to be optimized, or to express intervals of uncertainty."],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["@variables u [bounds=(-1,1)]\nhasbounds(u)\n"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["getbounds(u)\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Mark input as a disturbance"],"type":"node"},{"attributes":{},"tag":"p","children":["Indicate that an input is not available for control, i.e., it's a disturbance input."],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["@variables u [input=true, disturbance=true]\nisdisturbance(u)\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Mark parameter as tunable"],"type":"node"},{"attributes":{},"tag":"p","children":["Indicate that a parameter can be automatically tuned by automatic control tuning apps."],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["@parameters Kp [tunable=true]\nistunable(Kp)\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Probability distributions"],"type":"node"},{"attributes":{},"tag":"p","children":["A probability distribution may be associated with a parameter to indicate either uncertainty about it's value, or as a prior distribution for Bayesian optimization."],"type":"node"},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"USING","children":[{"attributes":{},"tag":"USING","children":["using"],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["Distributions"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["d"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"IDENTIFIER","children":["Normal"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["10"],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["1"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"MACROCALL","children":[{"attributes":{},"tag":"AT_SIGN","children":["@"],"type":"node"},{"attributes":{},"tag":"MACRO_NAME","children":["parameters"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["m"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"VECT","children":[{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["dist"],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["d"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/ModelingToolkit.hasdist"},"tag":"reference","children":["hasdist"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["m"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/ModelingToolkit.getdist"},"tag":"reference","children":["getdist"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["m"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"h2","children":["Additional functions"],"type":"node"},{"attributes":{},"tag":"p","children":["For systems that contain parameters with metadata like described above have some additional functions defined for convenience. In the example below, we define a system with tunable parameters and extract bounds vectors"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["@parameters t\nDₜ = Differential(t)\n@variables x(t)=0 u(t)=0 [input=true] y(t)=0 [output=true]\n@parameters T [tunable = true, bounds = (0, Inf)]\n@parameters k [tunable = true, bounds = (0, Inf)]\neqs = [\n    Dₜ(x) ~ (-x + k*u) / T # A first-order system with time constant T and gain k\n    y ~ x\n]\nsys = ODESystem(eqs, t, name=:tunable_first_order)\n"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["p = tunable_parameters(sys) # extract all parameters marked as tunable\n"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["lb, ub = getbounds(p) # operating on a vector, we get lower and upper bound vectors\n"],"type":"node"},{"attributes":{"lang":"@example metadata"},"tag":"codeblock","children":["b = getbounds(sys) # Operating on the system, we get a dict\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Index"],"type":"node"},{"attributes":{"lang":"@index"},"tag":"codeblock","children":["Pages = [\"Variable_metadata.md\"]\n"],"type":"node"},{"attributes":{},"tag":"h2","children":["Docstrings"],"type":"node"},{"attributes":{"lang":"@autodocs"},"tag":"codeblock","children":["Modules = [ModelingToolkit]\nPages = [\"variables.jl\"]\nPrivate = false\n"],"type":"node"}],"type":"node"}],"type":"node"}